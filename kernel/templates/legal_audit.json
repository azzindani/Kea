{
    "name": "legal_audit",
    "description": "Legal document analysis and compliance audit pipeline",
    "variables": [
        "company",
        "document_type"
    ],
    "blueprint": [
        {
            "id": "search_filings",
            "phase": 1,
            "tool": "web_search",
            "args": {
                "query": "{{company}} {{document_type}} SEC filing regulatory"
            },
            "artifact": "filing_urls"
        },
        {
            "id": "search_cases",
            "phase": 1,
            "tool": "web_search",
            "args": {
                "query": "{{company}} lawsuit court case legal"
            },
            "artifact": "case_data"
        },
        {
            "id": "extract_documents",
            "phase": 2,
            "tool": "execute_code",
            "args": {
                "code": "# Extract and parse legal documents"
            },
            "input_mapping": {
                "urls": "{{search_filings.artifacts.filing_urls}}"
            },
            "artifact": "parsed_documents"
        },
        {
            "id": "analyze_compliance",
            "phase": 3,
            "tool": "execute_code",
            "args": {
                "code": "# Analyze compliance status and identify risks"
            },
            "input_mapping": {
                "documents": "{{extract_documents.artifacts.parsed_documents}}",
                "cases": "{{search_cases.artifacts.case_data}}"
            },
            "artifact": "compliance_report"
        }
    ]
}