# Tool Registry Configuration
# Maps user intent keywords to specific tools and servers.
# Used by the Planner Node for routing.

items:
  # ===========================================
  # SEARCH TOOLS
  # ===========================================
  web_search:
    keywords: ["search", "find", "look up", "what is", "who is", "list of", "query"]
    server: "search_server"
    fallbacks: ["news_search", "human_search"]

  news_search:
    keywords: ["news", "recent", "latest", "announcement", "press release"]
    server: "search_server"
    fallbacks: ["web_search"]

  human_search:
    keywords: ["research", "investigate", "thorough", "comprehensive", "deep search"]
    server: "browser_agent_server"
    fallbacks: ["web_search"]

  # ===========================================
  # CRAWLER TOOLS (recursive, unlimited depth)
  # ===========================================
  web_crawler:
    keywords: ["crawl", "explore", "recursive", "all pages", "entire site", "sitemap"]
    server: "crawler_server"
    fallbacks: ["link_extractor", "scrape_url"]

  sitemap_parser:
    keywords: ["sitemap", "site map", "all urls", "url list"]
    server: "crawler_server"
    fallbacks: ["web_crawler"]

  link_extractor:
    keywords: ["extract links", "get links", "find links", "outbound", "href"]
    server: "crawler_server"
    fallbacks: ["web_search"]

  # ===========================================
  # SCRAPING TOOLS
  # ===========================================
  fetch_url:
    keywords: ["scrape", "extract", "download", "annual report", "website", "page", "fetch", "read url"]
    server: "scraper_server"
    fallbacks: ["web_search", "browser_scrape"]

  execute_code:
    keywords: ["data", "historical", "OHLCV", "price", "volume", "stock", "ticker", "API", "python", "calculate", "dataframe"]
    server: "python_server"
    fallbacks: ["web_search"]

  # ===========================================
  # FINANCIAL TOOLS
  # ===========================================
  get_idx_tickers:
    keywords: ["IDX", "JKSE", "companies", "list of stocks", "ticker list", "universe"]
    server: "mcp_host"
    fallbacks: ["web_search"]

  # ===========================================
  # QUALITATIVE TOOLS
  # ===========================================
  text_coding:
    keywords: ["code text", "qualitative coding", "label themes", "categorize text", "nlp coding"]
    server: "qualitative_server"
    fallbacks: ["theme_extractor", "execute_code"]

  entity_extractor:
    keywords: ["extract entities", "find people", "identify orgs", "ner", "named entity"]
    server: "qualitative_server"
    fallbacks: ["execute_code"]

  investigation_graph_add:
    keywords: ["add to graph", "map relationship", "build graph", "connect entity"]
    server: "qualitative_server"
    fallbacks: ["connection_mapper"]

  investigation_graph_query:
    keywords: ["query graph", "search graph", "find path", "graph lookup"]
    server: "qualitative_server"
    fallbacks: ["text_coding"]

  # ===========================================
  # ML TOOLS
  # ===========================================
  auto_ml:
    keywords: ["train model", "predict", "machine learning", "classification", "regression", "ml"]
    server: "ml_server"
    fallbacks: ["execute_code"]

  feature_importance:
    keywords: ["feature importance", "key drivers", "what matters", "variable significance"]
    server: "ml_server"
    fallbacks: ["execute_code"]

  # ===========================================
  # BROWSER AGENT TOOLS
  # ===========================================
  human_like_search:
    keywords: ["human search", "browse like human", "natural search"]
    server: "browser_agent_server"
    fallbacks: ["web_search"]

  search_memory_add:
    keywords: ["add to memory", "remember search", "cache result"]
    server: "browser_agent_server"
    fallbacks: []

  # ===========================================
  # YFINANCE TOOLS (Stock Data)
  # ===========================================
  get_current_price:
    keywords: ["stock price", "current price", "share price", "quote"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  get_market_cap:
    keywords: ["market cap", "market capitalization", "mcap", "valuation"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  get_pe_ratio:
    keywords: ["pe ratio", "price earnings", "p/e", "valuation ratio"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  get_income_statement_annual:
    keywords: ["income statement", "revenue", "profit", "financials", "annual report"]
    server: "yfinance_server"
    fallbacks: ["sec_filing_content"]

  get_balance_sheet_annual:
    keywords: ["balance sheet", "assets", "liabilities", "equity"]
    server: "yfinance_server"
    fallbacks: ["sec_filing_content"]

  get_cash_flow_annual:
    keywords: ["cash flow", "operating cash", "free cash flow", "fcf"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  get_analyst_ratings:
    keywords: ["analyst rating", "buy sell hold", "recommendation", "wall street"]
    server: "yfinance_server"
    fallbacks: ["web_search"]

  get_price_targets:
    keywords: ["price target", "target price", "analyst target", "fair value"]
    server: "yfinance_server"
    fallbacks: ["web_search"]

  get_earnings_calendar:
    keywords: ["earnings date", "earnings calendar", "quarterly earnings", "when earnings"]
    server: "yfinance_server"
    fallbacks: ["web_search"]

  get_dividends_history:
    keywords: ["dividend history", "dividend payment", "dividend yield", "payout"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  get_institutional_holders:
    keywords: ["institutional holders", "ownership", "who owns", "major shareholders"]
    server: "yfinance_server"
    fallbacks: ["sec_filing_content"]

  get_insider_transactions:
    keywords: ["insider trading", "insider buying", "insider selling", "form 4"]
    server: "yfinance_server"
    fallbacks: ["sec_filing_content"]

  get_options_chain:
    keywords: ["options chain", "calls puts", "option prices", "strike price"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  calculate_indicators:
    keywords: ["technical indicator", "SMA", "RSI", "MACD", "bollinger"]
    server: "yfinance_server"
    fallbacks: ["pandas_ta_sma"]

  get_full_report:
    keywords: ["full stock report", "comprehensive analysis", "stock overview"]
    server: "yfinance_server"
    fallbacks: ["execute_code"]

  # ===========================================
  # CCXT TOOLS (Crypto)
  # ===========================================
  get_ticker:
    keywords: ["crypto price", "bitcoin price", "eth price", "coin ticker"]
    server: "ccxt_server"
    fallbacks: ["web_search"]

  get_ohlcv:
    keywords: ["crypto candles", "crypto ohlcv", "coin history", "crypto chart data"]
    server: "ccxt_server"
    fallbacks: ["execute_code"]

  get_order_book:
    keywords: ["order book", "bids asks", "market depth", "liquidity"]
    server: "ccxt_server"
    fallbacks: ["execute_code"]

  get_funding_rate:
    keywords: ["funding rate", "perp funding", "futures funding"]
    server: "ccxt_server"
    fallbacks: ["web_search"]

  get_arbitrage_spread:
    keywords: ["arbitrage", "price difference", "spread", "cross exchange"]
    server: "ccxt_server"
    fallbacks: ["execute_code"]

  download_history:
    keywords: ["download crypto", "historical crypto", "10k candles", "bulk crypto"]
    server: "ccxt_server"
    fallbacks: ["execute_code"]

  list_all_exchanges:
    keywords: ["list exchanges", "crypto exchanges", "supported exchanges"]
    server: "ccxt_server"
    fallbacks: ["web_search"]

  # ===========================================
  # TRADINGVIEW TOOLS
  # ===========================================
  get_tradingview_analysis:
    keywords: ["tradingview", "tv analysis", "technical analysis", "tv signals"]
    server: "tradingview_server"
    fallbacks: ["calculate_indicators"]

  # ===========================================
  # TECHNICAL ANALYSIS (pandas-ta, finta, mibian)
  # ===========================================
  pandas_ta_sma:
    keywords: ["simple moving average", "sma", "moving average"]
    server: "pandas_ta_server"
    fallbacks: ["execute_code"]

  pandas_ta_rsi:
    keywords: ["rsi", "relative strength", "overbought oversold"]
    server: "pandas_ta_server"
    fallbacks: ["execute_code"]

  pandas_ta_macd:
    keywords: ["macd", "moving average convergence", "signal line"]
    server: "pandas_ta_server"
    fallbacks: ["execute_code"]

  pandas_ta_bbands:
    keywords: ["bollinger bands", "bbands", "volatility bands"]
    server: "pandas_ta_server"
    fallbacks: ["execute_code"]

  finta_indicators:
    keywords: ["finta", "financial indicator", "ta library"]
    server: "finta_server"
    fallbacks: ["pandas_ta_sma"]

  mibian_options:
    keywords: ["option pricing", "black scholes", "greeks", "delta gamma", "implied volatility"]
    server: "mibian_server"
    fallbacks: ["execute_code"]

  # ===========================================
  # FINVIZ TOOLS (Screener)
  # ===========================================
  finviz_screener:
    keywords: ["stock screener", "filter stocks", "find stocks", "scan stocks"]
    server: "finviz_server"
    fallbacks: ["web_search"]

  finviz_quote:
    keywords: ["finviz quote", "finviz data", "stock snapshot"]
    server: "finviz_server"
    fallbacks: ["get_current_price"]

  # ===========================================
  # PDR & WBGAPI (Economic Data)
  # ===========================================
  pdr_fred:
    keywords: ["fred data", "federal reserve", "economic data", "macro data"]
    server: "pdr_server"
    fallbacks: ["web_search"]

  wbgapi_indicator:
    keywords: ["world bank", "country data", "gdp", "population", "development"]
    server: "wbgapi_server"
    fallbacks: ["web_search"]

  # ===========================================
  # SEC/EDGAR TOOLS
  # ===========================================
  sec_search_filings:
    keywords: ["sec filing", "10-k", "10-q", "8-k", "annual report", "edgar"]
    server: "sec_edgar_server"
    fallbacks: ["python_edgar_search"]

  sec_filing_content:
    keywords: ["read filing", "filing content", "sec document", "parse edgar"]
    server: "sec_edgar_server"
    fallbacks: ["fetch_url"]

  python_edgar_search:
    keywords: ["edgar search", "company filings", "cik lookup"]
    server: "python_edgar_server"
    fallbacks: ["sec_search_filings"]

  # ===========================================
  # NEWSPAPER TOOLS (Articles)
  # ===========================================
  newspaper_extract:
    keywords: ["article extract", "news content", "newspaper", "article text"]
    server: "newspaper_server"
    fallbacks: ["fetch_url"]

  newspaper_nlp:
    keywords: ["article summary", "article keywords", "article nlp"]
    server: "newspaper_server"
    fallbacks: ["text_coding"]

  # ===========================================
  # WEB3 TOOLS (Blockchain)
  # ===========================================
  web3_balance:
    keywords: ["wallet balance", "eth balance", "erc20 balance", "token balance"]
    server: "web3_server"
    fallbacks: ["web_search"]

  web3_transaction:
    keywords: ["blockchain transaction", "tx hash", "transaction details"]
    server: "web3_server"
    fallbacks: ["web_search"]

  web3_contract:
    keywords: ["smart contract", "contract call", "abi", "solidity"]
    server: "web3_server"
    fallbacks: ["execute_code"]

  # ===========================================
  # ANALYSIS & FILESYSTEM
  # ===========================================
  statistical_analysis:
    keywords: ["statistics", "correlation", "regression", "anova", "ttest"]
    server: "analysis_server"
    fallbacks: ["execute_code"]

  file_read:
    keywords: ["read file", "load file", "open file", "file content"]
    server: "filesystem_server"
    fallbacks: ["execute_code"]

  file_write:
    keywords: ["write file", "save file", "export file", "create file"]
    server: "filesystem_server"
    fallbacks: ["execute_code"]
