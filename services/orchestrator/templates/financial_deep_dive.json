{
    "name": "financial_deep_dive",
    "description": "Comprehensive financial analysis pipeline for a stock ticker",
    "variables": [
        "ticker"
    ],
    "blueprint": [
        {
            "id": "fetch_prices",
            "phase": 1,
            "tool": "yfinance_server.get_bulk_historical_data",
            "args": {
                "tickers": "{{ticker}}",
                "period": "1y",
                "interval": "1d"
            },
            "artifact": "prices_csv"
        },
        {
            "id": "fetch_income",
            "phase": 1,
            "tool": "yfinance_server.get_income_statement_quarterly",
            "args": {
                "ticker": "{{ticker}}"
            },
            "artifact": "income_statement"
        },
        {
            "id": "fetch_balance",
            "phase": 1,
            "tool": "yfinance_server.get_balance_sheet_quarterly",
            "args": {
                "ticker": "{{ticker}}"
            },
            "artifact": "balance_sheet"
        },
        {
            "id": "calc_indicators",
            "phase": 2,
            "tool": "yfinance_server.calculate_indicators",
            "args": {
                "ticker": "{{ticker}}",
                "indicators": [
                    "rsi",
                    "macd",
                    "sma"
                ],
                "period": "1y"
            },
            "input_mapping": {
                "price_data": "{{fetch_prices.artifacts.prices_csv}}"
            },
            "artifact": "technical_indicators"
        },
        {
            "id": "analyze_financials",
            "phase": 2,
            "tool": "execute_code",
            "args": {
                "code": "# Analyze financial ratios from income statement and balance sheet"
            },
            "input_mapping": {
                "income": "{{fetch_income.artifacts.income_statement}}",
                "balance": "{{fetch_balance.artifacts.balance_sheet}}"
            },
            "artifact": "financial_ratios"
        },
        {
            "id": "generate_report",
            "phase": 3,
            "tool": "execute_code",
            "args": {
                "code": "# Generate comprehensive analysis report"
            },
            "input_mapping": {
                "indicators": "{{calc_indicators.artifacts.technical_indicators}}",
                "ratios": "{{analyze_financials.artifacts.financial_ratios}}"
            },
            "artifact": "final_report"
        }
    ]
}